"use strict";!function(t,e,n){var a,i=t.getElementsByTagName(e)[0];t.getElementById(n)||((a=t.createElement(e)).id=n,a.src="https://connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(a,i))}(document,"script","facebook-jssdk");var nextPaging="";function populateHomeCards(){var t=getEvents(10);t.then(function(t){var e=t.data,n=3,a=$("#home-section-events .card-deck"),i=!0,r=!1,o=void 0;try{for(var s,c=e[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var d=s.value;if(!d.name||-1!==d.name.indexOf("TGIFHacks")){var p=$("#templates #event-card-template").clone().removeAttr("id");if(d.name&&p.find(".card-title").text(d.name),d.cover&&p.find(".card-img-top").attr("src",d.cover.source),p.find(".btn").attr("href","https://www.facebook.com/events/"+d.id),a.append(p),0==--n)break}}}catch(t){r=!0,o=t}finally{try{!i&&c.return&&c.return()}finally{if(r)throw o}}}),t.catch(function(){console.error("Something went wrong in fetching event data.")})}function populateEventCards(){var t=getEvents(10);t.then(function(t){nextPaging=void 0===t.paging.next?"":t.paging.next;var e=t.data,n=$("#events-section-events"),a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var c=o.value,d=$("#templates #event-card-template").clone().removeAttr("id");if(d.find(".event-name").text(c.name),c.start_time&&c.end_time){var p=parseFBDate(c.start_time),l=parseFBDate(c.end_time),g="";g+=p.toDateString(),g+=" at ",g+=p.toTimeString().substring(0,5),g+=" - ",g+=p.toDateString()===l.toDateString()?"":" "+l.toDateString(),g+=l.toTimeString().substring(0,5),g+=" SGT",d.find(".event-datetime").text(g)}var v=d.find(".event-description");if(c.description)if(380<c.description.length){var f=c.description.substring(0,380),m=c.description.substring(380);v.text(f),v.append('<span class="ellipsis">...</span>'),v.append('<span class="more-text"></span>'),v.find(".more-text").text(m).hide(),v.append('&nbsp;&nbsp;<a href="javascript:void(0);" class="toggle-text" data-toggle="false">Show More</a>'),v.find(".toggle-text").click(function(t){var e=$(this);"false"===e.attr("data-toggle")?(e.text("Show Less"),e.attr("data-toggle","true")):(e.text("Show More"),e.attr("data-toggle","false")),e.parent().find(".ellipsis").toggle(),e.parent().find(".more-text").toggle()})}else v.text(c.description);c.cover&&d.find(".card-img-top").attr("src",c.cover.source),d.find(".btn").attr("href","https://www.facebook.com/events/"+c.id),n.append(d)}}catch(t){i=!0,r=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw r}}}),t.catch(function(){console.error("Something went wrong in fetching event data.")})}function parseFBDate(t){var e=parseInt(t.substring(0,4)),n=parseInt(t.substring(5,7)),a=parseInt(t.substring(8,10)),i=parseInt(t.substring(11,13)),r=parseInt(t.substring(14,16));return new Date(e,n,a,i,r)}function getEvents(a){return new Promise(function(e,n){var t=function(t){t.error?n():e(t)};""===nextPaging?FB.api("219467331408976/events",{limit:a,fields:"id,name,description,start_time,end_time,cover",access_token:"102814740426818|Yb7Io6_Ze8Ql3EjVcsNabKyLTWo"},t):FB.api(nextPaging,t)})}window.fbAsyncInit=function(){FB.init({appId:"102814740426818",autoLogAppEvents:!0,xfbml:!0,version:"v2.10"}),"/"===window.location.pathname?populateHomeCards():"/events.html"===window.location.pathname&&(populateEventCards(),$(window).scroll(function(){500<$(window).scrollTop()?$("#events-scroll-top-btn").show():$("#events-scroll-top-btn").hide(),$(window).scrollTop()==$(document).height()-$(window).height()&&(""!==nextPaging?($("#events-section-loading").show(),populateEventCards()):$("#events-section-loading").hide())}))};